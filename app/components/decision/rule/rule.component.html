<div class="panel panel-info">
  <div class="panel-heading">{{rule.name}}</div>
  <div class="panel-body">
    <div class="row">
      <div class="col-xs-8">
        <table class="table table-bordered table-hover table-condensed">
          <thead>
            <tr>
              <td><strong>Conditions Expression</strong></td>
              <td [hidden]="!rule.editing"></td>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="#condition of rule.conditions; #i=index" style="margin-bottom: 10px;">
              <!-- Input -->
<!--               <td>
                <span [hidden]="rule.editing">
                  {{condition.input || missingText }}
                </span>
                <span [hidden]="!rule.editing">
                  <select class="form-control" name="input" (change)="updateInputValue(i,$event)">
                    <option *ngFor="#inputOption of rule.inputs" value="{{inputOption}}" selected="{{condition.input === inputOption ? 'selected' : ''}}">{{inputOption}}</option>
                  </select>
                </span>
              </td>
              Operator
              <td>
                <span [hidden]="rule.editing">
                  {{ condition.operator || missingText }}
                </span>
                <span [hidden]="!rule.editing">
                  <select class="form-control" name="operator" (change)="updateInputValue(i,$event)">
                    <option *ngFor="#operatorOption of rule.operators" value="{{operatorOption}}" selected="{{condition.operator === operatorOption ? 'selected' : ''}}">{{operatorOption}}</option>
                  </select>
                </span>
              </td> -->
              <!-- Value(s) -->
              <td>
                <span [hidden]="rule.editing">
                  {{ condition.expression || missingText }}
                </span>
                <span [hidden]="!rule.editing">
                  <input #condition.expression value="{{condition.expression}}" name="expression" (change)="updateInputExpression(i,$event)" />
                </span>
              </td>
              <!-- Controls -->
              <td [hidden]="!rule.editing">
                <div class="buttons">
                  <button class="btn btn-danger btn-xs" (click)="removeCondition(i)">X</button>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
        <span class="buttons">
          <span class="buttons" [hidden]="rule.editing">
            <a class="btn btn-default" (click)="toggleEdit()" href="#" role="button" >Edit</a>
          </span>
          <span class="buttons" [hidden]="!rule.editing">
            <a class="btn btn-default btn-success" (click)="toggleEdit()" href="#" role="button" >Done</a>
          </span>
          <a class="btn btn-default" (click)="addCondition()" href="#" role="button">Add Row</a>
        </span>
      </div>

      <div class="col-xs-4">
        <table class="table table-bordered table-hover table-condensed">
          <thead>
            <tr>
              <td><strong>Actions Expression</strong></td>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="#action of rule.actions; #i=index" style="margin-bottom: 10px;">
              <!-- Output -->
              <!-- <td> -->
<!--                 <span [hidden]="rule.editing">
                  {{ output.output || missingText }}
                </span>
                <span [hidden]="!rule.editing">
                  <select class="form-control" name="output" (change)="updateOutputValue(i,$event)">
                    <option *ngFor="#outputOption of outputOptions" value="{{outputOption}}" selected="{{output.output === outputOption ? 'selected' : ''}}">{{outputOption}}</option>
                  </select>
                </span>
              </td>
              <td>
                <span>
                  =
                </span>
              </td>  -->      
              <!-- Value(s) -->
              <td>
                <span [hidden]="rule.editing">
                  {{ action.expression || missingText }}
                </span>
                <span [hidden]="!rule.editing">
                  <input #action.expression value="{{action.expression}}" name="expression" (change)="updateOutputExpression(i,$event)" />
                </span>
              </td>       
            </tr>
          </tbody>
        </table>
        <span class="buttons">
          <a class="btn btn-default" (click)="addAction()" href="#" role="button">Add Row</a>
        </span>
      </div>
    </div>
  </div>
</div>